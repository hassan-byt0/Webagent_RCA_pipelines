<!DOCTYPE html>
<!-- saved from url=(0076)https://bulia-keshav.github.io/Element-variation-websites/Dropdown/ARIA.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimpleZon - Shop Online - Accessible E-commerce</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        
        .header { background: #232f3e; color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: bold; }
        .nav { display: flex; gap: 20px; }
        .nav a { color: white; text-decoration: none; padding: 8px 12px; border-radius: 4px; }
        .nav a:hover, .nav a.active { background: #37475a; }
        .nav a:focus { outline: 2px solid #ff9900; outline-offset: 2px; }
        .cart-count { background: #ff9900; color: black; border-radius: 50%; padding: 2px 6px; font-size: 12px; margin-left: 5px; }
        
        .container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        
        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: #fff;
            padding: 8px;
            text-decoration: none;
            z-index: 100;
            border-radius: 4px;
        }
        .skip-link:focus {
            top: 6px;
        }
        
        /* Multilevel Dropdown Styles - Enhanced for Accessibility */
        .dropdown-container { 
            position: relative; 
            display: inline-block; 
            margin: 20px 0; 
        }
        .dropdown-trigger { 
            background: #232f3e; 
            color: white; 
            padding: 12px 20px; 
            border: 2px solid transparent;
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .dropdown-trigger:hover { background: #37475a; }
        .dropdown-trigger:focus { 
            outline: none;
            border-color: #ff9900; 
            box-shadow: 0 0 0 2px rgba(255, 153, 0, 0.5);
        }
        .dropdown-arrow { transition: transform 0.3s; }
        .dropdown-container.open .dropdown-arrow { transform: rotate(180deg); }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 200px;
            z-index: 1000;
            display: none;
        }
        .dropdown-container.open .dropdown-menu { display: block; }
        
        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            border: 2px solid transparent;
        }
        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover, .dropdown-item:focus { 
            background: #f8f9fa; 
            outline: none;
        }
        .dropdown-item:focus {
            border-color: #ff9900;
            box-shadow: inset 0 0 0 2px rgba(255, 153, 0, 0.3);
        }
        .dropdown-item.has-submenu::after { content: "‚ñ∫"; color: #666; }
        .dropdown-item[aria-expanded="true"]::after { content: "‚ñº"; }
        
        .dropdown-submenu {
            position: absolute;
            left: 100%;
            top: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 180px;
            display: none;
        }
        .dropdown-item:hover .dropdown-submenu,
        .dropdown-item:focus .dropdown-submenu,
        .dropdown-item[aria-expanded="true"] .dropdown-submenu { 
            display: block; 
        }
        
        .dropdown-submenu-l3 {
            position: absolute;
            left: 100%;
            top: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 160px;
            display: none;
        }
        .dropdown-item:hover .dropdown-submenu-l3,
        .dropdown-item:focus .dropdown-submenu-l3,
        .dropdown-item[aria-expanded="true"] .dropdown-submenu-l3 { 
            display: block; 
        }
        
        /* Focus indicators for better accessibility */
        .dropdown-item:focus-visible {
            background: #e3f2fd;
            border-color: #1976d2;
        }
        
        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Live region for announcements */
        .live-region {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        /* Products Grid */
        .products-section h2 { 
            margin: 30px 0 20px 0; 
            color: #232f3e; 
            font-size: 28px;
        }
        .products-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 20px; 
            margin-top: 20px; 
        }
        .product { 
            background: white; 
            border-radius: 8px; 
            padding: 20px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
            transition: transform 0.2s; 
            border: 2px solid transparent;
        }
        .product:hover { transform: translateY(-2px); }
        .product:focus-within {
            border-color: #ff9900;
            box-shadow: 0 4px 16px rgba(255, 153, 0, 0.3);
        }
        .product h3 { color: #232f3e; margin-bottom: 10px; font-size: 20px; }
        .product-info { margin: 10px 0; }
        .category-tag { 
            background: #e8f4f8; 
            color: #007185; 
            padding: 2px 8px; 
            border-radius: 12px; 
            font-size: 12px; 
            margin-bottom: 8px; 
            display: inline-block; 
        }
        .price { font-size: 18px; font-weight: bold; color: #b12704; }
        .rating { color: #ff9900; margin: 5px 0; }
        .add-btn { 
            background: #ff9900; 
            color: black; 
            border: 2px solid transparent;
            padding: 10px 20px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-weight: bold; 
            transition: all 0.3s;
            font-size: 14px;
        }
        .add-btn:hover { background: #e68900; }
        .add-btn:focus {
            outline: none;
            border-color: #232f3e;
            box-shadow: 0 0 0 2px rgba(35, 47, 62, 0.3);
        }
        
        .cart-page { display: none; }
        .cart-item { background: white; padding: 15px; margin: 10px 0; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .cart-summary { background: white; padding: 20px; border-radius: 8px; margin-top: 20px; }
        .checkout-btn { background: #ff9900; color: black; border: none; padding: 15px 30px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; }
        .empty-cart { text-align: center; padding: 50px; color: #666; }
        
        .success-page { display: none; }
        .success-container { text-align: center; background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .success-icon { font-size: 60px; color: #28a745; margin-bottom: 20px; }
        .success-title { font-size: 32px; color: #232f3e; margin-bottom: 10px; }
        .success-subtitle { color: #666; margin-bottom: 30px; }
        .order-summary { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: left; }
        .order-item { display: flex; justify-content: space-between; margin: 10px 0; padding: 5px 0; }
        .order-item:not(:last-child) { border-bottom: 1px solid #dee2e6; }
        .continue-btn { background: #232f3e; color: white; border: none; padding: 15px 30px; border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 20px; }
        .continue-btn:hover { background: #37475a; }

        .hidden { display: none !important; }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .dropdown-trigger:focus,
            .dropdown-item:focus {
                outline: 3px solid;
                outline-offset: 2px;
            }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .dropdown-arrow,
            .product {
                transition: none;
            }
        }
    </style>
</head>
<body>
    <!-- Skip link for keyboard navigation -->
    <a href="https://bulia-keshav.github.io/Element-variation-websites/Dropdown/ARIA.html#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Live region for screen reader announcements -->
    <div aria-live="polite" aria-atomic="true" class="live-region" id="live-region"></div>
    
    <div class="header">
        <div class="logo">SimpleZon</div>
        <div class="nav">
            <a href="https://bulia-keshav.github.io/Element-variation-websites/Dropdown/ARIA.html#" onclick="showProducts()" class="active" id="products-tab">Products</a>
            <a href="https://bulia-keshav.github.io/Element-variation-websites/Dropdown/ARIA.html#" onclick="showCart()" id="cart-tab">Cart <span class="cart-count" id="cart-count">0</span></a>
        </div>
    </div>

    <div class="container">
        <!-- Products Page -->
        <div id="products-page">
            <div id="main-content" tabindex="-1">
                <h1>Shop Our Products</h1>
                
                <!-- Multilevel Dropdown Filter - Enhanced for Accessibility -->
                <div class="dropdown-container" id="dropdown-container" role="navigation" aria-label="Product filter">
                    <button class="dropdown-trigger" onclick="toggleDropdown()" onkeydown="handleDropdownKeydown(event)" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-menu" id="dropdown-trigger" aria-describedby="dropdown-help">
                        <span id="dropdown-text">All Products</span>
                        <span class="dropdown-arrow" aria-hidden="true">‚ñº</span>
                    </button>
                    <div id="dropdown-help" class="sr-only">
                        Use arrow keys to navigate menu items. Press Enter or Space to select. Press Escape to close.
                    </div>
                    
                    <div class="dropdown-menu" id="dropdown-menu" role="menu" aria-labelledby="dropdown-trigger">
                        
                        <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-category="men">
                            <span>üëî Men</span>
                            <div class="dropdown-submenu" role="menu" aria-label="Men&#39;s categories">
                                <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-subcategory="shoes">
                                    <span>üëü Shoes</span>
                                    <div class="dropdown-submenu-l3" role="menu" aria-label="Men&#39;s shoe brands">
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;men&#39;, &#39;shoes&#39;, &#39;nike&#39;)" data-filter="men-shoes-nike">
                                            üèÉ‚Äç‚ôÇÔ∏è Nike
                                        </div>
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;men&#39;, &#39;shoes&#39;, &#39;adidas&#39;)" data-filter="men-shoes-adidas">
                                            ‚ö° Adidas
                                        </div>
                                    </div>
                                </div>
                                <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-subcategory="clothing">
                                    <span>üëï Clothing</span>
                                    <div class="dropdown-submenu-l3" role="menu" aria-label="Men&#39;s clothing types">
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;men&#39;, &#39;clothing&#39;, &#39;tshirts&#39;)" data-filter="men-clothing-tshirts">
                                            üëî T-Shirts
                                        </div>
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;men&#39;, &#39;clothing&#39;, &#39;jeans&#39;)" data-filter="men-clothing-jeans">
                                            üëñ Jeans
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-category="women">
                            <span>üëó Women</span>
                            <div class="dropdown-submenu" role="menu" aria-label="Women&#39;s categories">
                                <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-subcategory="shoes">
                                    <span>üë† Shoes</span>
                                    <div class="dropdown-submenu-l3" role="menu" aria-label="Women&#39;s shoe brands">
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;women&#39;, &#39;shoes&#39;, &#39;nike&#39;)" data-filter="women-shoes-nike">
                                            üèÉ‚Äç‚ôÄÔ∏è Nike
                                        </div>
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;women&#39;, &#39;shoes&#39;, &#39;adidas&#39;)" data-filter="women-shoes-adidas">
                                            ‚ú® Adidas
                                        </div>
                                    </div>
                                </div>
                                <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-subcategory="electronics">
                                    <span>üì± Electronics</span>
                                    <div class="dropdown-submenu-l3" role="menu" aria-label="Women&#39;s electronics">
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;women&#39;, &#39;electronics&#39;, &#39;headphones&#39;)" data-filter="women-electronics-headphones">
                                            üéß Headphones
                                        </div>
                                        <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;women&#39;, &#39;electronics&#39;, &#39;smartwatch&#39;)" data-filter="women-electronics-smartwatch">
                                            ‚åö Smartwatch
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dropdown-item has-submenu" role="menuitem" aria-haspopup="true" aria-expanded="false" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="handleMenuClick(event)" data-category="home">
                            <span>üè† Home</span>
                            <div class="dropdown-submenu" role="menu" aria-label="Home categories">
                                <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;home&#39;, &#39;garden&#39;, &#39;plants&#39;)" data-filter="home-garden-plants">
                                    üå± Plants
                                </div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" onkeydown="handleMenuKeydown(event)" onclick="filterProducts(&#39;home&#39;, &#39;decor&#39;, &#39;candles&#39;)" data-filter="home-decor-candles">
                                    üïØÔ∏è Candles
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Featured Products Section -->
                <div class="products-section">
                    <h2 id="products-title">Featured Products</h2>
                    <div class="products-grid" id="products-grid">
                    <div class="product">
                        <div class="category-tag">Electronics</div>
                        <h3>Wireless Headphones</h3>
                        <div class="product-info">
                            <div>Bluetooth noise-canceling headphones</div>
                            <div class="price">$89</div>
                            <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.2</div>
                        </div>
                        <button class="add-btn" onclick="addToCart(&#39;headphones&#39;)">Add to Cart</button>
                    </div>
                
                    <div class="product">
                        <div class="category-tag">Electronics</div>
                        <h3>Smart Fitness Watch</h3>
                        <div class="product-info">
                            <div>Track your fitness and health metrics</div>
                            <div class="price">$199</div>
                            <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.4</div>
                        </div>
                        <button class="add-btn" onclick="addToCart(&#39;smartwatch&#39;)">Add to Cart</button>
                    </div>
                
                    <div class="product">
                        <div class="category-tag">Clothing</div>
                        <h3>Cotton T-Shirt</h3>
                        <div class="product-info">
                            <div>Comfortable 100% cotton t-shirt</div>
                            <div class="price">$25</div>
                            <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.0</div>
                        </div>
                        <button class="add-btn" onclick="addToCart(&#39;tshirt&#39;)">Add to Cart</button>
                    </div>
                
                    <div class="product">
                        <div class="category-tag">Home</div>
                        <h3>Indoor Plant Set</h3>
                        <div class="product-info">
                            <div>Set of 3 air-purifying plants</div>
                            <div class="price">$45</div>
                            <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.5</div>
                        </div>
                        <button class="add-btn" onclick="addToCart(&#39;plant&#39;)">Add to Cart</button>
                    </div>
                
                    <div class="product">
                        <div class="category-tag">Home</div>
                        <h3>Scented Candles Pack</h3>
                        <div class="product-info">
                            <div>Pack of 4 aromatherapy candles</div>
                            <div class="price">$32</div>
                            <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.2</div>
                        </div>
                        <button class="add-btn" onclick="addToCart(&#39;candle&#39;)">Add to Cart</button>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cart-page" class="cart-page">
            <h1>Shopping Cart</h1>
            <div id="cart-items"></div>
            <div id="cart-summary"></div>
        </div>

        <!-- Success Page -->
        <div id="success-page" class="success-page">
            <div class="success-container">
                <div class="success-icon">‚úÖ</div>
                <h1 class="success-title">Congratulations!</h1>
                <p class="success-subtitle">Your order has been placed successfully</p>
                
                <div class="order-summary">
                    <h3 style="margin-bottom: 15px; color: #232f3e;">Order Summary</h3>
                    <div id="order-items"></div>
                    <div class="order-item" style="font-weight: bold; font-size: 18px; color: #b12704;">
                        <span>Total Paid:</span>
                        <span id="total-paid"></span>
                    </div>
                </div>
                
                <button class="continue-btn" onclick="continueShopping()">Continue Shopping</button>
            </div>
        </div>
    </div>

    <script>
        let cart = [];
        let lastOrder = { items: [], total: 0 };
        let currentFilter = 'featured';
        let currentFocusIndex = -1;
        let menuItems = [];
        
        const products = {
            // Featured Products (shown initially)
            headphones: { name: 'Wireless Headphones', price: 89, rating: '4.2', category: 'electronics', description: 'Bluetooth noise-canceling headphones', gender: 'women', subcategory: 'electronics', brand: 'headphones' },
            smartwatch: { name: 'Smart Fitness Watch', price: 199, rating: '4.4', category: 'electronics', description: 'Track your fitness and health metrics', gender: 'women', subcategory: 'electronics', brand: 'smartwatch' },
            tshirt: { name: 'Cotton T-Shirt', price: 25, rating: '4.0', category: 'clothing', description: 'Comfortable 100% cotton t-shirt', gender: 'men', subcategory: 'clothing', brand: 'tshirts' },
            plant: { name: 'Indoor Plant Set', price: 45, rating: '4.5', category: 'home', description: 'Set of 3 air-purifying plants', gender: 'home', subcategory: 'garden', brand: 'plants' },
            candle: { name: 'Scented Candles Pack', price: 32, rating: '4.2', category: 'home', description: 'Pack of 4 aromatherapy candles', gender: 'home', subcategory: 'decor', brand: 'candles' },
            
            // Nike Products (only visible through dropdown)
            nike_air_max_90: { name: 'Nike Air Max 90', price: 110, rating: '4.6', category: 'shoes', description: 'Classic Air Max with visible air cushioning', gender: 'men', subcategory: 'shoes', brand: 'nike' },
            nike_air_max_pro: { name: 'Nike Air Max Pro', price: 95, rating: '4.5', category: 'shoes', description: 'Professional running shoes with advanced cushioning', gender: 'men', subcategory: 'shoes', brand: 'nike' },
            nike_air_max_270: { name: 'Nike Air Max 270', price: 130, rating: '4.7', category: 'shoes', description: 'Lifestyle shoes with maximum Air unit', gender: 'men', subcategory: 'shoes', brand: 'nike' },
            nike_women_air_max: { name: 'Nike Women Air Max', price: 105, rating: '4.4', category: 'shoes', description: 'Stylish women\'s Air Max sneakers', gender: 'women', subcategory: 'shoes', brand: 'nike' },
            
            // Other brand products
            adidas_ultraboost: { name: 'Adidas Ultraboost', price: 180, rating: '4.7', category: 'shoes', description: 'Premium running shoes with boost technology', gender: 'men', subcategory: 'shoes', brand: 'adidas' },
            adidas_women: { name: 'Adidas Women Sneakers', price: 140, rating: '4.3', category: 'shoes', description: 'Comfortable women\'s sneakers', gender: 'women', subcategory: 'shoes', brand: 'adidas' },
            jeans: { name: 'Denim Jeans', price: 65, rating: '4.3', category: 'clothing', description: 'Classic fit blue denim jeans', gender: 'men', subcategory: 'clothing', brand: 'jeans' }
        };

        // Accessibility Helper Functions (ONLY for dropdown)
        function announceToScreenReader(message) {
            const liveRegion = document.getElementById('live-region');
            liveRegion.textContent = message;
            setTimeout(() => {
                liveRegion.textContent = '';
            }, 1000);
        }

        function updateAriaExpanded(element, isExpanded) {
            element.setAttribute('aria-expanded', isExpanded.toString());
        }

        function getAllMenuItems() {
            return Array.from(document.querySelectorAll('.dropdown-item[role="menuitem"]'));
        }

        function setFocus(index) {
            if (menuItems.length === 0) return;
            
            menuItems.forEach(item => item.setAttribute('tabindex', '-1'));
            
            if (index >= 0 && index < menuItems.length) {
                currentFocusIndex = index;
                menuItems[index].setAttribute('tabindex', '0');
                menuItems[index].focus();
            }
        }

        function toggleDropdown() {
            const container = document.getElementById('dropdown-container');
            const trigger = document.getElementById('dropdown-trigger');
            const menu = document.getElementById('dropdown-menu');
            const isOpen = container.classList.contains('open');
            
            if (isOpen) {
                closeDropdown();
            } else {
                openDropdown();
            }
        }

        function openDropdown() {
            const container = document.getElementById('dropdown-container');
            const trigger = document.getElementById('dropdown-trigger');
            const menu = document.getElementById('dropdown-menu');
            
            container.classList.add('open');
            menu.style.display = 'block';
            updateAriaExpanded(trigger, true);
            
            menuItems = getAllMenuItems();
            currentFocusIndex = -1;
            
            announceToScreenReader('Product filter menu opened. Use arrow keys to navigate.');
        }

        function closeDropdown() {
            const container = document.getElementById('dropdown-container');
            const trigger = document.getElementById('dropdown-trigger');
            const menu = document.getElementById('dropdown-menu');
            
            container.classList.remove('open');
            menu.style.display = 'none';
            updateAriaExpanded(trigger, false);
            
            const allItems = document.querySelectorAll('.dropdown-item[aria-expanded="true"]');
            allItems.forEach(item => {
                updateAriaExpanded(item, false);
            });
            
            trigger.focus();
            currentFocusIndex = -1;
            
            announceToScreenReader('Product filter menu closed');
        }

        function handleDropdownKeydown(event) {
            switch (event.key) {
                case 'Enter':
                case ' ':
                    event.preventDefault();
                    toggleDropdown();
                    break;
                case 'ArrowDown':
                    event.preventDefault();
                    if (!document.getElementById('dropdown-container').classList.contains('open')) {
                        openDropdown();
                    }
                    setTimeout(() => {
                        setFocus(0);
                    }, 50);
                    break;
                case 'Escape':
                    closeDropdown();
                    break;
            }
        }

        function handleMenuKeydown(event) {
            const isDropdownOpen = document.getElementById('dropdown-container').classList.contains('open');
            if (!isDropdownOpen) return;

            switch (event.key) {
                case 'ArrowDown':
                    event.preventDefault();
                    navigateMenu('down');
                    break;
                case 'ArrowUp':
                    event.preventDefault();
                    navigateMenu('up');
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    expandSubmenu(event.target);
                    break;
                case 'ArrowLeft':
                    event.preventDefault();
                    collapseSubmenu(event.target);
                    break;
                case 'Enter':
                case ' ':
                    event.preventDefault();
                    activateMenuItem(event.target);
                    break;
                case 'Escape':
                    event.preventDefault();
                    closeDropdown();
                    break;
                case 'Home':
                    event.preventDefault();
                    setFocus(0);
                    break;
                case 'End':
                    event.preventDefault();
                    setFocus(menuItems.length - 1);
                    break;
            }
        }

        function navigateMenu(direction) {
            if (menuItems.length === 0) {
                menuItems = getAllMenuItems();
            }

            if (direction === 'down') {
                currentFocusIndex = (currentFocusIndex + 1) % menuItems.length;
            } else {
                currentFocusIndex = currentFocusIndex <= 0 ? menuItems.length - 1 : currentFocusIndex - 1;
            }
            
            setFocus(currentFocusIndex);
        }

        function expandSubmenu(menuItem) {
            if (menuItem.classList.contains('has-submenu')) {
                updateAriaExpanded(menuItem, true);
                announceToScreenReader('Submenu expanded');
            }
        }

        function collapseSubmenu(menuItem) {
            if (menuItem.classList.contains('has-submenu')) {
                updateAriaExpanded(menuItem, false);
                announceToScreenReader('Submenu collapsed');
            }
        }

        function activateMenuItem(menuItem) {
            if (menuItem.hasAttribute('data-filter')) {
                const filter = menuItem.getAttribute('data-filter');
                const [gender, subcategory, brand] = filter.split('-');
                filterProducts(gender, subcategory, brand);
            } else if (menuItem.classList.contains('has-submenu')) {
                const isExpanded = menuItem.getAttribute('aria-expanded') === 'true';
                updateAriaExpanded(menuItem, !isExpanded);
                announceToScreenReader(isExpanded ? 'Submenu collapsed' : 'Submenu expanded');
            }
        }

        function handleMenuClick(event) {
            const menuItem = event.currentTarget;
            if (menuItem.classList.contains('has-submenu')) {
                const isExpanded = menuItem.getAttribute('aria-expanded') === 'true';
                updateAriaExpanded(menuItem, !isExpanded);
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const container = document.getElementById('dropdown-container');
            if (!container.contains(event.target)) {
                closeDropdown();
            }
        });

        function renderProducts() {
            const grid = document.getElementById('products-grid');
            const title = document.getElementById('products-title');
            let html = '';
            let filteredProducts = [];
            
            if (currentFilter === 'featured') {
                title.textContent = 'Featured Products';
                filteredProducts = Object.entries(products).filter(([id, product]) => 
                    ['headphones', 'smartwatch', 'tshirt', 'plant', 'candle'].includes(id)
                );
            } else {
                const [gender, subcategory, brand] = currentFilter.split('-');
                title.textContent = `${gender.charAt(0).toUpperCase() + gender.slice(1)} > ${subcategory.charAt(0).toUpperCase() + subcategory.slice(1)} > ${brand.charAt(0).toUpperCase() + brand.slice(1)}`;
                
                filteredProducts = Object.entries(products).filter(([id, product]) => 
                    product.gender === gender && product.subcategory === subcategory && product.brand === brand
                );
            }
            
            filteredProducts.forEach(([id, product]) => {
                html += `
                    <div class="product">
                        <div class="category-tag">${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</div>
                        <h3>${product.name}</h3>
                        <div class="product-info">
                            <div>${product.description}</div>
                            <div class="price">$${product.price}</div>
                            <div class="rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ ${product.rating}</div>
                        </div>
                        <button class="add-btn" onclick="addToCart('${id}')">Add to Cart</button>
                    </div>
                `;
            });
            
            if (html === '') {
                html = '<div style="text-align: center; padding: 50px; color: #666;">No products found for this selection.</div>';
            }
            
            grid.innerHTML = html;
            
            // Announce product count to screen reader
            const productCount = filteredProducts.length;
            const announcement = productCount > 0 
                ? `${productCount} ${productCount === 1 ? 'product' : 'products'} found`
                : 'No products found for this selection';
            announceToScreenReader(announcement);
        }

        function filterProducts(gender, subcategory, brand) {
            currentFilter = `${gender}-${subcategory}-${brand}`;
            
            const triggerText = document.getElementById('dropdown-text');
            triggerText.textContent = `${gender.charAt(0).toUpperCase() + gender.slice(1)} > ${subcategory.charAt(0).toUpperCase() + subcategory.slice(1)} > ${brand.charAt(0).toUpperCase() + brand.slice(1)}`;
            
            closeDropdown();
            renderProducts();
            
            announceToScreenReader(`Filter applied: ${triggerText.textContent}`);
        }

        function addToCart(productId) {
            const existing = cart.find(item => item.id === productId);
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ id: productId, quantity: 1 });
            }
            updateCartCount();
            alert('Added to cart!');
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
            showCart();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }

        function showProducts() {
            document.getElementById('products-page').style.display = 'block';
            document.getElementById('cart-page').style.display = 'none';
            document.getElementById('success-page').style.display = 'none';
            document.getElementById('products-tab').classList.add('active');
            document.getElementById('cart-tab').classList.remove('active');
        }

        function showCart() {
            document.getElementById('products-page').style.display = 'none';
            document.getElementById('cart-page').style.display = 'block';
            document.getElementById('success-page').style.display = 'none';
            document.getElementById('products-tab').classList.remove('active');
            document.getElementById('cart-tab').classList.add('active');
            renderCart();
        }

        function showSuccess() {
            document.getElementById('products-page').style.display = 'none';
            document.getElementById('cart-page').style.display = 'none';
            document.getElementById('success-page').style.display = 'block';
            document.getElementById('products-tab').classList.remove('active');
            document.getElementById('cart-tab').classList.remove('active');
            renderSuccessPage();
        }

        function renderCart() {
            const cartItems = document.getElementById('cart-items');
            const cartSummary = document.getElementById('cart-summary');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
                cartSummary.innerHTML = '';
                return;
            }

            let itemsHtml = '';
            let total = 0;
            
            cart.forEach(item => {
                const product = products[item.id];
                const itemTotal = product.price * item.quantity;
                total += itemTotal;
                
                itemsHtml += `
                    <div class="cart-item">
                        <div>
                            <h3>${product.name}</h3>
                            <div>Category: ${product.category} | Qty: ${item.quantity}</div>
                            <div>Rating: ‚òÖ ${product.rating}</div>
                        </div>
                        <div>
                            <div class="price">$${itemTotal}</div>
                            <button onclick="removeFromCart('${item.id}')" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Remove</button>
                        </div>
                    </div>
                `;
            });

            cartItems.innerHTML = itemsHtml;
            
            cartSummary.innerHTML = `
                <h2>Order Summary</h2>
                <div style="margin: 10px 0;">
                    <div>Subtotal: $${total}</div>
                    <div>Shipping: FREE</div>
                    <hr style="margin: 10px 0;">
                    <div style="font-weight: bold; font-size: 18px; color: #b12704;">Total: $${total}</div>
                </div>
                <button class="checkout-btn" onclick="proceedToCheckout()">Proceed to Checkout</button>
            `;
        }

        function proceedToCheckout() {
            lastOrder.items = [...cart];
            let total = 0;
            cart.forEach(item => {
                const product = products[item.id];
                total += product.price * item.quantity;
            });
            
            lastOrder.total = total;
            cart = [];
            updateCartCount();
            showSuccess();
        }

        function renderSuccessPage() {
            const orderItems = document.getElementById('order-items');
            const totalPaid = document.getElementById('total-paid');
            
            let itemsHtml = '';
            lastOrder.items.forEach(item => {
                const product = products[item.id];
                const itemTotal = product.price * item.quantity;
                itemsHtml += `
                    <div class="order-item">
                        <span>${product.name} (Qty: ${item.quantity})</span>
                        <span>$${itemTotal}</span>
                    </div>
                `;
            });
            
            orderItems.innerHTML = itemsHtml;
            totalPaid.textContent = `$${lastOrder.total}`;
        }

        function continueShopping() {
            currentFilter = 'featured';
            document.getElementById('dropdown-text').textContent = 'All Products';
            showProducts();
            renderProducts();
        }

        // Initialize the page
        renderProducts();
        
        // Set initial ARIA states for dropdown
        document.getElementById('dropdown-trigger').setAttribute('aria-expanded', 'false');
        document.querySelectorAll('.dropdown-item.has-submenu').forEach(item => {
            item.setAttribute('aria-expanded', 'false');
        });
    </script>


</body></html>