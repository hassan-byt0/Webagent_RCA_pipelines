<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Search</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 28px;
            margin-bottom: 30px;
            color: #333;
            font-weight: normal;
        }

        .form-section {
            margin-bottom: 25px;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        input[type="text"], select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .search-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .search-term {
            flex: 1;
        }

        .search-field {
            width: 120px;
        }

        .add-term-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            color: #666;
        }

        .add-term-btn:hover {
            background: #e9ecef;
        }

        .search-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .search-btn:hover {
            background: #0056b3;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        input[type="checkbox"], input[type="radio"] {
            margin: 0;
        }

        .radio-group {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .date-inputs {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 10px;
        }

        .date-input {
            width: 150px;
        }

        .note-text {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
            line-height: 1.4;
        }

        .highlight-text {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 2px;
        }

        .results-per-page {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .results-select {
            width: 80px;
        }

        .final-search-btn {
            margin-top: 20px;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Advanced Search</h1>
        
        <form id="advancedSearchForm">
            <!-- Search Terms Section -->
            <div class="form-section">
                <div class="form-group">
                    <label>Search term(s)</label>
                    <div id="searchTerms">
                        <div class="search-row">
                            <input type="text" class="search-term" placeholder="Search term...">
                            <select class="search-field">
                                <option value="title">Title</option>
                                <option value="author">Author</option>
                                <option value="abstract">Abstract</option>
                                <option value="comment">Comment</option>
                                <option value="journal">Journal</option>
                                <option value="subject">Subject</option>
                                <option value="report">Report</option>
                                <option value="all">All fields</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="add-term-btn" onclick="addSearchTerm()">Add another term+</button>
                    <button type="button" class="search-btn" style="margin-left: 10px;">Search</button>
                </div>
            </div>

            <!-- Subject Section -->
            <div class="form-section">
                <div class="form-group">
                    <label>Subject</label>
                    <p style="color: #666; font-size: 14px; margin: 10px 0;">All classifications will be included by default</p>
                    
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="cs" name="subject" value="cs">
                            <label for="cs">Computer Science (cs)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="physics" name="subject" value="physics">
                            <label for="physics">Physics</label>
                            <select style="width: 80px; margin-left: 10px;">
                                <option value="all">all</option>
                            </select>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="econ" name="subject" value="econ">
                            <label for="econ">Economics (econ)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="q-bio" name="subject" value="q-bio">
                            <label for="q-bio">Quantitative Biology (q-bio)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="eess" name="subject" value="eess">
                            <label for="eess">Electrical Engineering and Systems Science (eess)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="q-fin" name="subject" value="q-fin">
                            <label for="q-fin">Quantitative Finance (q-fin)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="math" name="subject" value="math">
                            <label for="math">Mathematics (math)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="stat" name="subject" value="stat">
                            <label for="stat">Statistics (stat)</label>
                        </div>
                    </div>

                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="include-cross" name="cross-listed" value="include" checked>
                            <label for="include-cross">Include cross-listed papers</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="exclude-cross" name="cross-listed" value="exclude">
                            <label for="exclude-cross">Exclude cross-listed papers</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Date Section -->
            <div class="form-section">
                <div class="form-group">
                    <label>Date</label>
                    
                    <div class="radio-group" style="flex-direction: column; align-items: flex-start; gap: 15px;">
                        <div class="radio-item">
                            <input type="radio" id="all-dates" name="date-filter" value="all" checked>
                            <label for="all-dates">All dates</label>
                        </div>
                        
                        <div class="radio-item">
                            <input type="radio" id="past-12" name="date-filter" value="past-12">
                            <label for="past-12">Past 12 months</label>
                        </div>
                        
                        <div class="radio-item">
                            <input type="radio" id="specific-year" name="date-filter" value="specific">
                            <label for="specific-year">Specific year</label>
                            <input type="text" placeholder="YYYY" class="date-input" style="width: 100px; margin-left: 10px;">
                        </div>
                        
                        <div class="radio-item">
                            <input type="radio" id="date-range" name="date-filter" value="range">
                            <label for="date-range">Date range</label>
                        </div>
                    </div>

                    <div class="date-inputs" style="margin-left: 20px;">
                        <span>From</span>
                        <input type="text" placeholder="YYYY[-MM[-DD]]" class="date-input">
                        <span>to</span>
                        <input type="text" placeholder="YYYY[-MM[-DD]]" class="date-input">
                    </div>

                    <div class="note-text">
                        When limiting by date range, the lower bound of the "from" date and the upper bound of the "to" date are used.
                        For example, searching with <span class="highlight-text">From: 2012-02</span> and <span class="highlight-text">To: 2013</span> will search for papers submitted from <span class="highlight-text">2012-02-01</span> to <span class="highlight-text">2013-12-31</span>
                    </div>

                    <div class="radio-group" style="margin-top: 20px;">
                        <div class="radio-item">
                            <input type="radio" id="submission-recent" name="date-type" value="submission-recent" checked>
                            <label for="submission-recent">Submission date (most recent)</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="submission-original" name="date-type" value="submission-original">
                            <label for="submission-original">Submission date (original)</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="announcement" name="date-type" value="announcement">
                            <label for="announcement">Announcement date</label>
                        </div>
                    </div>

                    <div class="note-text">
                        You may filter on either submission date or announcement date. Note that announcement date supports only year and month granularity.
                    </div>
                </div>
            </div>

            <!-- Display Options Section -->
            <div class="form-section">
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="show-abstracts" name="abstracts" value="show" checked>
                        <label for="show-abstracts">Show abstracts</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="hide-abstracts" name="abstracts" value="hide">
                        <label for="hide-abstracts">Hide abstracts</label>
                    </div>
                </div>

                <div class="results-per-page">
                    <select class="results-select">
                        <option value="25">25</option>
                        <option value="50" selected>50</option>
                        <option value="100">100</option>
                        <option value="200">200</option>
                    </select>
                    <span>results per page</span>
                    <div class="checkbox-item" style="margin-left: 20px;">
                        <input type="checkbox" id="include-older" name="include-older">
                        <label for="include-older">Include older versions of papers</label>
                    </div>
                </div>

                <div class="final-search-btn">
                    <button type="submit" class="search-btn">Search</button>
                </div>
            </div>
        </form>

        <div id="successMessage" class="success-message">
            Form submitted successfully!
        </div>
    </div>

    <script>
        function addSearchTerm() {
            const searchTermsContainer = document.getElementById('searchTerms');
            const newRow = document.createElement('div');
            newRow.className = 'search-row';
            newRow.innerHTML = `
                <input type="text" class="search-term" placeholder="Search term...">
                <select class="search-field">
                    <option value="title">Title</option>
                    <option value="author">Author</option>
                    <option value="abstract">Abstract</option>
                    <option value="comment">Comment</option>
                    <option value="journal">Journal</option>
                    <option value="subject">Subject</option>
                    <option value="report">Report</option>
                    <option value="all">All fields</option>
                </select>
            `;
            searchTermsContainer.appendChild(newRow);
        }

        function collectSearchParameters() {
            const params = new URLSearchParams();
            
            // Collect search terms
            const searchRows = document.querySelectorAll('.search-row');
            const searchTerms = [];
            searchRows.forEach(row => {
                const term = row.querySelector('.search-term').value.trim();
                const field = row.querySelector('.search-field').value;
                if (term) {
                    searchTerms.push({ term, field });
                }
            });
            if (searchTerms.length > 0) {
                params.set('searchTerms', JSON.stringify(searchTerms));
            }
            
            // Collect subject filters
            const subjects = [];
            document.querySelectorAll('input[name="subject"]:checked').forEach(checkbox => {
                subjects.push(checkbox.value);
            });
            if (subjects.length > 0) {
                params.set('subjects', subjects.join(','));
            }
            
            // Cross-listed papers option
            const crossListed = document.querySelector('input[name="cross-listed"]:checked').value;
            params.set('crossListed', crossListed);
            
            // Date filtering
            const dateFilter = document.querySelector('input[name="date-filter"]:checked').value;
            params.set('dateFilter', dateFilter);
            
            if (dateFilter === 'specific') {
                const year = document.querySelector('input[placeholder="YYYY"]').value.trim();
                if (year) params.set('specificYear', year);
            } else if (dateFilter === 'range') {
                const fromDate = document.querySelector('input[placeholder="YYYY[-MM[-DD]]"]').value.trim();
                const toDate = document.querySelectorAll('input[placeholder="YYYY[-MM[-DD]]"]')[1].value.trim();
                if (fromDate) params.set('fromDate', fromDate);
                if (toDate) params.set('toDate', toDate);
            }
            
            // Date type
            const dateType = document.querySelector('input[name="date-type"]:checked').value;
            params.set('dateType', dateType);
            
            // Display options
            const showAbstracts = document.querySelector('input[name="abstracts"]:checked').value;
            params.set('showAbstracts', showAbstracts);
            
            const resultsPerPage = document.querySelector('.results-select').value;
            params.set('resultsPerPage', resultsPerPage);
            
            const includeOlder = document.querySelector('#include-older').checked;
            params.set('includeOlder', includeOlder);
            
            return params;
        }

        function performSearch() {
            const params = collectSearchParameters();
            // Redirect to results page with search parameters
            window.location.href = `Data.html?${params.toString()}`;
        }

        document.getElementById('advancedSearchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            performSearch();
        });

        // Handle search button clicks (not just form submission)
        document.querySelectorAll('.search-btn').forEach(btn => {
            if (btn.type !== 'submit') {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    performSearch();
                });
            }
        });
    </script>
</body>
</html>